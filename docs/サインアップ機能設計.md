# サインアップ機能 詳細設計書

## 1. 機能概要

サインアップ（新規ユーザー登録）機能は、新規ユーザーがシステムに登録するための機能です。ユーザーはメールアドレスを入力するだけで、システムが自動的にアクセスID・パスワードを生成し、ユーザーに提供します。

## 2. 技術仕様

### 2.1 クライアント側の実装

#### 2.1.1 サインアップ画面（signup.html）
- **入力項目**: メールアドレス
- **ボタン**: 登録ボタン
- **エラー表示**: 入力エラーや登録失敗時のメッセージ表示領域
- **成功表示**: 登録成功時のID/パスワード表示領域

#### 2.1.2 APIとの連携
- **通信方法**: `google.script.run`を使用
- **呼び出し関数**: `registerNewUser(email)`
- **成功時処理**: 生成されたID/パスワードの表示、ログイン画面へのリンク表示
- **失敗時処理**: エラーメッセージの表示

### 2.2 サーバー側の実装

#### 2.2.1 ユーザー登録処理
- **関数名**: `registerNewUser(email)`（既存）
- **処理内容**:
  1. メールアドレスの形式チェック
  2. 重複チェック
  3. アクセスID・パスワードの自動生成
  4. スプレッドシートへのユーザー情報登録
  5. 登録結果の返却

## 3. 実装手順

### 3.1 サインアップ画面の作成
1. `signup.html`ファイルの作成
2. メールアドレス入力フォームの実装
3. バリデーション処理の実装
4. 結果表示領域の実装

### 3.2 ログイン画面からの遷移設定
1. `login.html`の「新規登録はこちら」リンクの設定
2. GASのHTMLサービスでの`signup.html`の提供設定

### 3.3 APIとの連携
1. `google.script.run`を使用した`registerNewUser`関数の呼び出し
2. 登録結果に応じた画面表示の切り替え

## 4. セキュリティ考慮事項

- メールアドレスのバリデーションを厳格に行う
- 自動生成されるパスワードは十分な複雑さを持たせる
- 登録成功時に表示されるID/パスワードは一度だけ表示し、再表示不可とする

## 5. テスト計画

### 5.1 正常系テスト
- 有効なメールアドレスでの登録成功確認
- 生成されたID/パスワードの表示確認
- ログイン画面への遷移確認

### 5.2 異常系テスト
- 無効なメールアドレス形式での登録失敗確認
- 既存メールアドレスでの重複エラー確認
- 通信エラー時の挙動確認

## 6. 今後の拡張性

- パスワード強度の設定オプション
- メール確認プロセスの追加
- ユーザープロフィール情報の追加入力
